(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[3],{1148:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return w}));var r=n(9),o=n(8),i=n(13),a=n(14),s=n(1),c=n(1927),u=n(1928),l=n(1929),d=n(557),p=n(498),f=n.n(p),b=n(875),h=n(792),j=n(1930),g=n(7),x=e.gd,v=0,m=function(e,t,n){var r=e.getGameResolutionWidth(),o=e.getGameResolutionHeight(),i=window.screenX+window.innerWidth/2-r/2,a=window.screenY+window.innerHeight/2-o/2,s=n||"GDevelopPreview"+v++;return{previewWindow:window.open(t,s,"width=".concat(r,",height=").concat(o,",left=").concat(i,",top=").concat(a)),targetId:s}},w=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).canDoNetworkPreview=function(){return!1},e.canDoHotReload=function(){return!1},e.state={previewLinkDialog:null,error:null},e._prepareExporter=function(){return Object(d.a)("preview").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=Object(h.a)(),o=Object(b.a)()+r,i=new l.a({filesContent:n,bucketBaseUrl:Object(b.a)(),prefix:r}),a=f()(new x.AbstractFileSystemJS,i),s=new x.Exporter(a,t);return s.setCodeOutputDirectory(o),{exporter:s,outputDir:o,browserS3FileSystem:i}}))},e.launchPreview=function(t){var n=t.project,r=t.layout,o=t.externalLayout;return e.setState({error:null}),e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(i){var a=i.exporter,s=i.outputDir,c=i.browserS3FileSystem,u=new x.PreviewExportOptions(n,s);u.setLayoutName(r.getName()),o&&u.setExternalLayoutName(o.getName()),u.useWindowMessageDebuggerClient();var l=e.getPreviewDebuggerServer().getExistingDebuggerIds(),d=l.length?l[l.length-1]:null,p=t.hotReload&&null!==d;return u.setNonRuntimeScriptsCacheBurst(Date.now()),u.setFullLoadingScreen(t.fullLoadingScreen),a.exportProjectForPixiPreview(u),u.delete(),a.delete(),c.uploadPendingObjects().then((function(){var t=s+"/index.html",r=m(n,t,p?Object(j.b)(d):null),o=r.previewWindow,i=r.targetId;o?Object(j.c)({previewWindow:o,targetId:i}):e.setState({previewLinkDialog:{project:n,url:t}})}))})).catch((function(t){e.setState({error:t})}))},e}return Object(o.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return j.a}},{key:"render",value:function(){var e=this,t=this.state,n=t.previewLinkDialog,r=t.error;return r?Object(g.jsx)(u.a,{error:r,onClose:function(){return e.setState({error:null})}}):n?Object(g.jsx)(c.a,{url:n.url,project:n.project,onPreviewWindowOpened:function(e){var t=e.previewWindow,n=e.targetId;Object(j.c)({previewWindow:t,targetId:n})},onClose:function(){return e.setState({previewLinkDialog:null})}}):null}}]),n}(s.Component)}).call(this,n(27))},1149:function(e,t,n){"use strict";var r=n(3),o=n(0),i=n.n(o),a=n(62),s=n.n(a),c=n(35),u=function(e){return e.startsWith("example://")};t.a={internalName:"UrlStorageProvider",name:{id:"URL"},hiddenInOpenDialog:!0,hiddenInSaveDialog:!0,getFileMetadataFromAppArguments:function(e){if(!e[c.a])return null;if(!e[c.a].length)return null;var t,n=e[c.a][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")||u(n)?{fileIdentifier:n}:null},createOperations:function(e){e.setDialog,e.closeDialog;return{onOpen:function(){var e=Object(r.a)(i.a.mark((function e(t){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileIdentifier,u(n)&&(r=n.replace("example://",""),n="https://resources.gdevelop-app.com/examples/".concat(r,"/").concat(r,".json")),e.next=4,s.a.get(n);case 4:if((o=e.sent).data){e.next=7;break}throw new Error("Can't parse data from the URL (is it valid JSON?)");case 7:return e.abrupt("return",{content:o.data});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}},1927:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(9),o=n(8),i=n(13),a=n(14),s=n(12),c=n(1),u=n(99),l=(n(61),n(30)),d=n(463),p=n(1148),f=n(7),b=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._makeOnOpen=function(t){return function(){var t=Object(p.b)(e.props.project,e.props.url,null),n=t.previewWindow,r=t.targetId;e.props.onPreviewWindowOpened({previewWindow:n,targetId:r}),e.props.onClose()}},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return this.props.url?Object(f.jsx)(s.I18n,{children:function(t){var n=t.i18n;return Object(f.jsxs)(u.b,{actions:[Object(f.jsx)(u.a,{label:Object(f.jsx)(s.Trans,{id:"Launch the preview"}),primary:!0,onClick:e._makeOnOpen(n)},"launch-preview")],onRequestClose:e.props.onClose,onApply:e._makeOnOpen(n),open:!0,children:[Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(s.Trans,{id:"Your preview is ready! Click on the button to launch the preview."})})})}),Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(s.Trans,{id:"To skip this dialog and <0>directly open the preview next time</0>, please allow popups to be opened for this website in your browser.",components:[Object(f.jsx)("b",{})]})})})})]})}}):null}}]),n}(c.Component)},1928:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(9),o=n(8),i=n(13),a=n(14),s=n(12),c=n(1),u=n(99),l=n(135),d=n(30),p=n(463),f=n(7),b=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.onClose;return Object(f.jsx)(s.I18n,{children:function(e){e.i18n;return Object(f.jsxs)(u.b,{actions:[Object(f.jsx)(l.a,{label:Object(f.jsx)(s.Trans,{id:"Close"}),onClick:n},"close")],title:Object(f.jsx)(s.Trans,{id:"Could not launch the preview"}),onRequestClose:n,open:!0,children:[Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(p.a,{children:"NetworkingError"===t.code?Object(f.jsx)(s.Trans,{id:"The preview could not be launched because you're offline."}):Object(f.jsx)(s.Trans,{id:"The preview could not be launched because an error happened: {0}.",values:{0:t.message}})})})}),Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(p.a,{children:Object(f.jsx)(s.Trans,{id:"Make sure you're online, have a proper internet connection and try again. If you download and use GDevelop desktop application, you can also run previews without any internet connection."})})})})]})}})}}]),n}(c.Component)},1929:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(8),o=n(9),i=n(146),a=n.n(i),s=n(875),c=e.gd,u=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},l=Object(r.a)((function e(t){var n=this,r=t.filesContent,i=t.prefix,l=t.bucketBaseUrl;Object(o.a)(this,e),this._pendingUploadObjects=[],this._allCopiedExternalUrls=new Set,this.uploadPendingObjects=function(){return Promise.all(n._pendingUploadObjects.map(s.b)).then((function(e){console.log("Uploaded all objects:",e),n._pendingUploadObjects=[]}),(function(e){throw console.error("Can't upload all objects:",e),e}))},this.mkDir=function(e){},this.dirExists=function(e){return!0},this.clearDir=function(e){},this.getTempDir=function(){return"/virtual-unused-tmp-dir"},this.fileNameFrom=function(e){return u(e)?e:a.a.basename(e)},this.dirNameFrom=function(e){return u(e)?"":a.a.dirname(e)},this.makeAbsolute=function(e,t){return u(e)?e:(n.isAbsolute(t)||(t=a.a.resolve(t)),a.a.resolve(t,a.a.normalize(e)))},this.makeRelative=function(e,t){return u(e)?e:a.a.relative(t,a.a.normalize(e))},this.isAbsolute=function(e){return!!u(e)||(0===e.length||(e.length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},this.copyFile=function(e,t){return u(e)?(n._allCopiedExternalUrls.add(e),!0):(console.warn("Copy not done from",e,"to",t),!0)},this.writeToFile=function(e,t){var r=e.replace(n.bucketBaseUrl,""),o=a.a.extname(e);return n._pendingUploadObjects.push({Key:r,Body:t,ContentType:{".js":"text/javascript",".html":"text/html"}[o]}),!0},this.readFile=function(e){return n._indexedFilesContent[e]?n._indexedFilesContent[e].text:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new c.VectorString;return n._allCopiedExternalUrls.forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){return u(e),!0},this.prefix=i,this.bucketBaseUrl=l,this._indexedFilesContent={},r.forEach((function(e){n._indexedFilesContent[e.filePath]=e}))}))}).call(this,n(27))},1930:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return g}));var r=n(3),o=n(0),i=n.n(o),a="stopped",s=[],c=0,u={},l=function(){return Object.keys(u).map((function(e){return Number(e)}))},d=function(e){for(var t in u){var n=Number(t);if(u[n].previewWindow===e)return n}return null},p=null,f=function(){null===p&&(p=setInterval((function(){var e=function(e){var t=Number(e);u[t].previewWindow.closed&&(console.info("A preview window was closed, with debugger id:",t),delete u[t],s.forEach((function(e){return(0,e.onConnectionClosed)({id:t,debuggerIds:l()})})),Object.keys(u).length||(clearInterval(p),p=null))};for(var t in u)e(t)}),1e3))},b="https://game-previews.gdevelop-app.com",h={startServer:function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("started"!==a){e.next=2;break}return e.abrupt("return");case 2:a="started",window.addEventListener("message",(function(e){if(e.origin===b){var t=d(e.source);if(null!==t)try{var n=JSON.parse(e.data);s.forEach((function(e){return(0,e.onHandleParsedMessage)({id:t,parsedMessage:n})}))}catch(r){console.error("Error while parsing messages coming from a preview:",r)}}})),f(),s.forEach((function(e){return(0,e.onServerStateChanged)()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendMessage:function(e,t){var n=u[e].previewWindow;if(n)try{n.postMessage(t,b)}catch(r){console.error("Unable to send a message to the preview window:",r)}},getServerState:function(){return a},getExistingDebuggerIds:l,registerCallbacks:function(e){return s.push(e),function(){var t=s.indexOf(e);-1!==t&&s.splice(t,1)}}},j=function(e){var t=e.previewWindow,n=e.targetId,r=c++,o=d(t);null!==o&&delete u[o],u[r]={previewWindow:t,targetId:n},f(),s.forEach((function(e){return(0,e.onConnectionOpened)({id:r,debuggerIds:l()})}))},g=function(e){if(null==e)return null;var t=u[e];return t?t.targetId:null}},1931:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),o=n(12),i=(n(1),n(498)),a=n.n(i),s=n(520),c=n(876),u=n(557),l=n(586),d=n(587),p=n(738),f=n(7),b=e.gd,h={name:"browser-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,t,n){return t||""===n},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(u.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=a()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return a.set("exportForCordova",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(s.f)().then((function(n){return Object(c.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(s.a)(o,i.uid,n,e.targets,e.keystore,r):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(27))},1932:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(159),o=!1,i=null,a=function(){if(o){var t=e.zip;return Promise.resolve(t)}return i||(i=Object(r.a)("./external/zip.js/WebContent/zip.js").then((function(){var t=e.zip;if(!t)throw new Error('Can not find "zip" in the global namespace after loading zip.js. Has the zip.js script being loaded properly?');return i=null,o=!0,t.workerScripts={deflater:["./external/zip.js/WebContent/z-worker.js","./external/zlib-asm/zlib.js","./external/zip.js/WebContent/zlib-asm/codecs.js"],inflater:["./external/zip.js/WebContent/z-worker.js","./external/zlib-asm/zlib.js","./external/zip.js/WebContent/zlib-asm/codecs.js"]},t})),i)}}).call(this,n(27))},1933:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),o=n(12),i=(n(1),n(498)),a=n.n(i),s=n(520),c=n(876),u=n(557),l=n(586),d=n(587),p=n(739),f=n(7),b=e.gd,h={name:"browser-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,t,n){return!!e.targets.length&&(t||""===n)},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=a()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return a.set("exportForElectron",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(s.f)().then((function(n){return Object(c.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(s.b)(o,i.uid,n,e.targets,r):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(27))},1934:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(12),o=(n(1),n(498)),i=n.n(o),a=n(520),s=n(876),c=n(557),u=n(586),l=n(587),d=n(744),p=n(7),f=e.gd,b={name:"browser-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,t,n){return t||""===n||"done"===n},isNavigationDisabled:function(e,t){return!t&&!["","done"].includes(e)},renderHeader:function(){return Object(p.jsx)(d.a,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var t=e.build,n=e.project,r=e.onSaveProject,o=e.errored,i=e.exportStep;return Object(p.jsx)(d.b,{build:t,project:n,onSaveProject:r,errored:o,exportStep:i})},prepareExporter:function(e){return Object(c.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new u.a({textFiles:n}),o=i()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new f.MapStringBoolean;return n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(l.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(l.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress,sizeLimit:25e7})},launchUpload:function(e,t){return Object(a.f)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(a.c)(o,i.uid,n,r):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(27))},1935:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(12),o=(n(1),n(498)),i=n.n(o),a=n(557),s=n(586),c=n(587),u=n(136),l=n(742),d=n(743),p=n(662),f=n(7),b=e.gd,h={name:"browser-html5",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(f.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(f.jsx)(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(a.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(f.jsx)(d.a,{renderGameButton:function(){return Object(f.jsx)(l.a,{blob:t,children:function(e){return Object(f.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(p.d)(e,"game.zip")},label:Object(f.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(27))},1936:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(12),o=(n(1),n(498)),i=n.n(o),a=n(557),s=n(586),c=n(587),u=n(136),l=n(742),d=n(734),p=n(662),f=n(7),b=e.gd,h={name:"browser-cordova",packageNameWarningType:"mobile",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(f.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(f.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return a.set("exportForCordova",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(f.jsx)(d.a,{renderGameButton:function(){return Object(f.jsx)(l.a,{blob:t,children:function(e){return Object(f.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(p.d)(e,"game.zip")},label:Object(f.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(27))},1937:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(12),o=(n(1),n(498)),i=n.n(o),a=n(557),s=n(586),c=n(587),u=n(136),l=n(742),d=n(735),p=n(662),f=n(7),b=e.gd,h={name:"browser-electron",packageNameWarningType:"desktop",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(f.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(f.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return a.set("exportForElectron",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(f.jsx)(d.a,{renderGameButton:function(){return Object(f.jsx)(l.a,{blob:t,children:function(e){return Object(f.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(p.d)(e,"game.zip")},label:Object(f.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(27))},1938:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(12),o=(n(1),n(498)),i=n.n(o),a=n(557),s=n(586),c=n(587),u=n(136),l=n(742),d=n(737),p=n(662),f=n(7),b=e.gd,h={name:"browser-facebook-instant-games",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(f.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(f.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.a)("facebook-instant-games").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return a.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(f.jsx)(d.a,{renderGameButton:function(){return Object(f.jsx)(l.a,{blob:t,children:function(e){return Object(f.jsx)(u.a,{primary:!0,onClick:function(){return Object(p.d)(e,"fb-instant-game.zip")},label:Object(f.jsx)(r.Trans,{id:"Download the Instant Game archive"})})}})}})}}}).call(this,n(27))},1939:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(1139),o=(n(728),n(530),e.gd),i=[{name:"AdMob",extensionModule:n(1940),objectsRenderingServiceModules:{}},{name:"AdvancedWindow",extensionModule:n(1941),objectsRenderingServiceModules:{}},{name:"FacebookInstantGames",extensionModule:n(1942),objectsRenderingServiceModules:{}},{name:"DeviceSensors",extensionModule:n(1943),objectsRenderingServiceModules:{}},{name:"DeviceVibration",extensionModule:n(1944),objectsRenderingServiceModules:{}},{name:"DebuggerTools",extensionModule:n(1945),objectsRenderingServiceModules:{}},{name:"Physics2",extensionModule:n(1946),objectsRenderingServiceModules:{}},{name:"ExampleJsExtension",extensionModule:n(1947),objectsRenderingServiceModules:{}},{name:"Tween",extensionModule:n(1948),objectsRenderingServiceModules:{}},{name:"Video",extensionModule:n(1949),objectsRenderingServiceModules:{}},{name:"FileSystem",extensionModule:n(1950),objectsRenderingServiceModules:{}},{name:"Firebase",extensionModule:n(1951),objectsRenderingServiceModules:{}},{name:"Leaderboards",extensionModule:n(1952),objectsRenderingServiceModules:{}},{name:"DialogueTree",extensionModule:n(1953),objectsRenderingServiceModules:{}},{name:"BBText",extensionModule:n(1954),objectsRenderingServiceModules:{"pixi-multistyle-text/dist/pixi-multistyle-text.umd":n(1955)}},{name:"TileMap",extensionModule:n(1956),objectsRenderingServiceModules:{"pixi-tilemap/dist/pixi-tilemap.umd":n(1959),"pixi-tilemap-helper":n(1962),"pako/dist/pako.min":n(1963)}},{name:"Effects",extensionModule:n(1964),objectsRenderingServiceModules:{}},{name:"P2P",extensionModule:n(1965),objectsRenderingServiceModules:{}},{name:"Lighting",extensionModule:n(1966),objectsRenderingServiceModules:{}},{name:"SpatialSound",extensionModule:n(1967),objectsRenderingServiceModules:{}},{name:"BitmapText",extensionModule:n(1968),objectsRenderingServiceModules:{}},{name:"Screenshot",extensionModule:n(1969),objectsRenderingServiceModules:{}},{name:"TextInput",extensionModule:n(1970),objectsRenderingServiceModules:{}}];function a(e){var t=e.objectsEditorService,n=e.objectsRenderingService,a=e.filterExamples;return{loadAllExtensions:function(e){return Promise.resolve(i.filter((function(e){var t=e.name;return!a||!t.includes("Example")})).map((function(i){var a=i.name,s=i.extensionModule,c=i.objectsRenderingServiceModules;if(t&&s.registerEditorConfigurations&&s.registerEditorConfigurations(t),n&&c)for(var u in c)n.registerModule(u,c[u]);return n&&s.registerInstanceRenderers&&s.registerInstanceRenderers(n),{extensionModulePath:"internal-extension://"+a,result:Object(r.loadExtension)(e,o,o.JsPlatform.get(),s)}})))}}}}).call(this,n(27))},1971:function(e,t,n){"use strict";(function(e){n(1);var r=n(492),o=n(1972),i=n(2116),a=n(159),s=n(7),c="AIzaSyDJYQmzLCfjXnNImDa1X_cDTWjl2BOrcM4",u=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],l="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.install",d=!1,p=null,f=function(){return d?Promise.resolve():p||(p=Object(a.a)("https://apis.google.com/js/api:client.js").then((function(){var t=e.gapi;if(!t)throw new Error("No gapi global object found after loading Google Drive API script");return new Promise((function(e,n){t.load("client:auth2:picker",{callback:function(){var n=t.auth2.init({apiKey:c,clientId:"44882707384-3t4tubr3fbht87sbtdp7u5mlo45k5uku.apps.googleusercontent.com",discoveryDocs:u,scope:l});t.client.setApiKey(c);var r=t.client.load("drive","v3");e(Promise.all([n,r]))},onerror:function(){n(new Error("Unable to load auth2 and picker APIs for Google Drive."))}})}))})).then((function(){d=!0,p=null})).catch((function(e){throw console.error("Error while loading Google Drive APIs:",e),p=null,e})))},b=!1,h=function(){return f().then((function(){var t=e.gapi.auth2.getAuthInstance();return b&&t.isSignedIn.get()?t.currentUser.get():(b=!1,t.isSignedIn.listen((function(e){console.info("Authenticated with Google APIs: ",e),b=e})),t.signIn({scope:l}).then((function(e){if(!e.getAuthResponse()||e.getAuthResponse().error)throw console.error("OAuth2 error while sign in:",e.getAuthResponse()?e.getAuthResponse().error:"No AuthResponse"),new Error("Authentication error");return b=!0,e})))}))},j=function(e,t,n){return fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(e),{method:"PATCH",headers:new Headers({Authorization:"Bearer ".concat(t.getAuthResponse().access_token),"Content-Type":"application/json"}),body:n}).then((function(e){if(200!==e.status)throw 401===e.status&&(b=!1),e}))},g=function(t){var n=t.selectFolderEnabled,r=t.showUploadView;return h().then((function(t){var o=e.google;return new Promise((function(e){var i=null,a=(new o.picker.PickerBuilder).addView((new o.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(n)).setOAuthToken(t.getAuthResponse().access_token).setDeveloperKey(c).setAppId("44882707384").setCallback((function(t){if(t[o.picker.Response.ACTION]===o.picker.Action.PICKED){var n=t[o.picker.Response.DOCUMENTS][0],r=n[o.picker.Document.ID],a=n[o.picker.Document.NAME],s=n[o.picker.Document.PARENT_ID];n[o.picker.Document.TYPE]===o.picker.Type.LOCATION||"application/vnd.google-apps.folder"===n[o.picker.Document.MIME_TYPE]?e({id:r,name:a,type:"FOLDER"}):e({id:r,name:a,type:"FILE",parentId:s}),i&&i.dispose()}else t[o.picker.Response.ACTION]===o.picker.Action.CANCEL&&(e(null),i&&i.dispose())}));r&&a.addView((new o.picker.DocsUploadView).setIncludeFolders(!0)),(i=a.build()).setVisible(!0);for(var s=document.getElementsByClassName("picker-dialog"),u=0;u<s.length;++u)s[u].style.zIndex="5000"}))}))};t.a={internalName:"GoogleDrive",name:{id:"Google Drive"},renderIcon:function(){return Object(s.jsx)(o.a,{})},getFileMetadataFromAppArguments:function(e){if(e.state)try{var t=JSON.parse(e.state);if(t.ids&&t.ids[0])return{fileIdentifier:t.ids[0]}}catch(n){console.warn("Error while trying to parse the Google Drive 'ids' in 'state' from the app arguments.")}return null},createOperations:function(t){var n=t.setDialog,o=t.closeDialog;return f().catch((function(){})),{doesInitialOpenRequireUserInteraction:!0,onOpen:function(e){var t=e.fileIdentifier;return h().then((function(e){return fetch("https://www.googleapis.com/drive/v3/files/".concat(t,"?alt=media"),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(e.getAuthResponse().access_token)})})})).then((function(e){return e.text().then((function(e){return new Promise((function(n,r){try{return n({content:JSON.parse(e)})}catch(o){return r(t+" is a corrupted/malformed file.")}}))}),(function(e){throw console.error("Error while reading the file from Google Drive API: ",e),e}))}),(function(e){throw console.error("Error while fetching the file from Google Drive API: ",e),e}))},onOpenWithPicker:function(){return h().then((function(e){return g({selectFolderEnabled:!1,showUploadView:!0})})).then((function(e){return e?{fileIdentifier:e.id}:null}))},onSaveProject:function(e,t){var n=t.fileIdentifier,o=Object(r.a)(e);return h().then((function(e){return j(n,e,o)})).then((function(){return{wasSaved:!0,fileMetadata:t}}))},onSaveProjectAs:function(t,a){return new Promise((function(c){n((function(){return Object(s.jsx)(i.a,{onShowFilePicker:g,onCancel:function(){o(),c({wasSaved:!1,fileMetadata:a})},onSave:function(n){var i=n.selectedFileOrFolder,a=n.newFileName,s=Object(r.a)(t);return"FOLDER"===i.type?h().then((function(t){return(n=i.id,r=a,e.gapi.client.drive.files.create({"content-type":"application/json",uploadType:"multipart",name:r,parents:[n],mimeType:"application/json",fields:"id, name, kind, size"}).then((function(e){return e.result.id}))).then((function(e){return j(e,t,s).then((function(){o(),c({wasSaved:!0,fileMetadata:{fileIdentifier:e}})}))}));var n,r})):h().then((function(e){return j(i.id,e,s)})).then((function(){o(),c({wasSaved:!0,fileMetadata:{fileIdentifier:i.id}})}))}})}))}))},getOpenErrorMessage:function(e){return d?{id:"Check that you don't have any blocked popup (if so, allow them and retry) and that you have the authorizations for reading the file you're trying to access."}:{id:"Google Drive could not be loaded. Check that you are not offline and have a proper internet connection, then try again."}}}}}}).call(this,n(27))},1972:function(e,t,n){"use strict";var r=n(4),o=n(1),i=n.n(o),a=n(893),s=n(7);t.a=i.a.memo((function(e){return Object(s.jsx)(a.a,Object(r.a)(Object(r.a)({},e),{},{children:Object(s.jsx)("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})}))}))},1974:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(3),o=n(0),i=n.n(o),a=n(1149),s=n(611),c=n(79),u=n(61),l=e.gd,d=function(){var e=Object(r.a)(i.a.mark((function e(t){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.i18n,n=t.settings,Object(c.q)({exampleUrl:"",exampleSlug:""}),r=n.projectName,o=l.ProjectHelper.createNewGDJSProject(),e.abrupt("return",{project:o,projectName:r,storageProvider:null,fileMetadata:null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r.a)(i.a.mark((function e(t){var n,r,o,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.i18n,r=t.exampleShortHeader,o=t.settings,e.prev=1,l=o.projectName,e.next=5,Object(s.a)(r);case 5:return d=e.sent,Object(c.q)({exampleUrl:d.projectFileUrl,exampleSlug:r.slug}),e.abrupt("return",{storageProvider:a.a,projectName:l,fileMetadata:{fileIdentifier:d.projectFileUrl}});case 10:return e.prev=10,e.t0=e.catch(1),Object(u.a)({message:n._({id:"Unable to fetch the example."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"browser-example-load-error"}),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(27))},2116:function(e,t,n){"use strict";var r=n(28),o=n(12),i=n(1),a=n(99),s=n(135),c=n(30),u=n(4),l=n(136),d=n(469),p=n(7),f={container:{position:"relative",display:"flex",alignItems:"baseline",width:"100%"},button:{marginLeft:10},textField:{flex:1}},b=function(e){return Object(p.jsxs)("div",{style:Object(u.a)({},f.container),children:[Object(p.jsx)(d.b,{style:f.textField,floatingLabelText:e.floatingLabelText,floatingLabelFixed:!0,type:"text",hintText:{id:"Choose a file or folder"},value:e.value?e.value.name:"",onChange:function(){}}),Object(p.jsx)(l.a,{label:Object(p.jsx)(o.Trans,{id:"Choose..."}),primary:!0,style:f.button,onClick:e.onOpenPicker})]})},h=n(542),j=n(477);t.a=function(e){var t=i.useState(null),n=Object(r.a)(t,2),u=n[0],l=n[1],f=i.useState(""),g=Object(r.a)(f,2),x=g[0],v=g[1],m=i.useState(!1),w=Object(r.a)(m,2),O=w[0],F=w[1],y=i.useState(null),S=Object(r.a)(y,2),P=S[0],k=S[1],C=i.useState(null),D=Object(r.a)(C,2),E=D[0],R=D[1],T=i.useState(!1),L=Object(r.a)(T,2),I=L[0],M=L[1],A=function(){if(!O&&u)return"FOLDER"!==u.type||!!x},U=function(){A()&&u&&(k(null),F(!0),e.onSave({selectedFileOrFolder:u,newFileName:x}).catch((function(e){k(e),F(!1)})))},W=function(){return!O};return I?null:Object(p.jsx)(a.b,{title:Object(p.jsx)(o.Trans,{id:"Save on Google Drive"}),actions:[Object(p.jsx)(s.a,{label:Object(p.jsx)(o.Trans,{id:"Cancel"}),primary:!1,disabled:!W(),onClick:e.onCancel},"cancel"),Object(p.jsx)(h.a,{isLoading:O,children:Object(p.jsx)(a.a,{label:Object(p.jsx)(o.Trans,{id:"Save"}),primary:!0,disabled:!A(),onClick:U})},"save")],cannotBeDismissed:O,onRequestClose:function(){W()&&e.onCancel()},onApply:U,open:!0,maxWidth:"sm",children:Object(p.jsxs)(c.a,{noMargin:!0,children:[Object(p.jsx)(c.c,{children:Object(p.jsx)(b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"Google Drive folder or existing file to overwrite"}),value:u,onOpenPicker:function(){M(!0),R(null),e.onShowFilePicker({selectFolderEnabled:!0,showUploadView:!1}).then((function(e){l(e),M(!1)})).catch((function(e){R(e),M(!1)}))}})}),Object(p.jsx)(c.c,{children:u&&"FOLDER"===u.type?Object(p.jsx)(d.b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"New file name"}),floatingLabelFixed:!0,type:"text",hintText:{id:"YourGame.json"},value:x,onChange:function(e,t){return v(t)},fullWidth:!0}):null}),P&&Object(p.jsx)(c.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when saving your game. Verify that you have the rights on the folder or file that you selected and try again."})}),E&&Object(p.jsx)(c.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when selecting a file or folder from Google Drive. Try again later or verify that you are properly connected to Google Drive."})})]})})}},441:function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return ye}));var r=n(4),o=n(1),i=n.n(o),a=n(891),s=n(35),c=n(1159),u=n(1160),l=(n(103),n(219),n(18)),d=n(3),p=n(28),f=n(0),b=n.n(f),h=n(12),j=n(866),g=n(1167),x=n(146),v=n.n(x),m=n(30),w=n(78),O=n(136),F=n(476),y=n(795),S=n(62),P=n.n(S),k=n(477),C=n(7),D=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource;return Object(C.jsx)(g.a,{onChoose:function(e){var t=e.url,o=r();o.setFile(t),o.setName(v.a.basename(t)),o.setOrigin("gdevelop-asset-store",t),n([o])},resourceKind:t.resourceKind})},E=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource,i=o.useState(""),a=Object(p.a)(i,2),s=a[0],c=a[1],u=o.useState(null),l=Object(p.a)(u,2),f=l[0],j=l[1],g=o.useState([]),x=Object(p.a)(g,2),S=x[0],D=x[1],E=!!S.filter(Boolean).length,R=Object(y.a)(function(){var e=Object(d.a)(b.a.mark((function e(n){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.multiSelection?n.split("\n").filter(Boolean):[n],j(null),D([]),e.prev=3,e.next=6,Promise.all(r.map(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get(t,{timeout:1e3,validateStatus:function(e){return!0}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o=e.sent,D(o.map((function(e){return!(e.status>=200&&e.status<400)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),j(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),500);return o.useEffect((function(){R(s)}),[s,R]),Object(C.jsxs)(w.a,{noMargin:!0,expand:!0,children:[Object(C.jsx)(m.c,{noMargin:!0,children:Object(C.jsx)(w.d,{renderButton:function(e){return Object(C.jsx)(O.a,{onClick:function(){var e=t.multiSelection?s.split("\n").filter(Boolean):[s];n(e.map((function(e){var t=r();return t.setFile(e),t.setName(v.a.basename(e)),t.setOrigin("url",e),t})))},primary:!0,label:Object(C.jsx)(h.Trans,{id:"Choose"}),style:e,disabled:!!f||E})},renderTextField:function(){return Object(C.jsx)(F.a,{floatingLabelText:t.multiSelection?Object(C.jsx)(h.Trans,{id:"Resource(s) URL(s) (one per line)"}):Object(C.jsx)(h.Trans,{id:"Resource URL"}),value:s,onChange:c,multiline:t.multiSelection,rows:1,rowsMax:5,fullWidth:!0,errorText:f?Object(C.jsx)(h.Trans,{id:"There was an error verifying the URL(s). Please check they are correct."}):E?Object(C.jsx)(h.Trans,{id:"Unable to verify URLs {0} . Please check they are correct.",values:{0:S.map((function(e,t){return e?"#"+(t+1):null})).filter(Boolean).join(", ")}}):null})}})}),Object(C.jsx)(k.a,{kind:"warning",children:Object(C.jsx)(h.Trans,{id:"The URLs must be public and stay accessible while you work on this project - they won't be stored inside the project file. When exporting a game, the resources pointed by these URLs will be downloaded and stored inside the game."})})]})},R=[].concat(Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"resource-store-".concat(t),displayName:{id:"Choose from asset store"},displayTab:"standalone",kind:t,renderComponent:function(e){return Object(C.jsx)(D,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"resource-store-".concat(t))}}}))),Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"url-chooser-".concat(t),displayName:{id:"Use an URL"},displayTab:"import",kind:t,renderComponent:function(e){return Object(C.jsx)(E,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"url-chooser-".concat(t))}}})))),T=n(79),L=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(){Object(T.n)("piskel"),s.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}},{name:"jfxr-app",displayName:"Edit with Jfxr",kind:"audio",edit:function(){Object(T.n)("jfxr"),s.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}},{name:"yarn-app",displayName:"Edit with Yarn",kind:"json",edit:function(){Object(T.n)("yarn"),s.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}}],I=n(1148),M=n(662),A=n(1939),U=n(728),W=n(530),N=n(875),B=n(792),z=n(708),_=n.n(z),G=function(e){var t=e.onWriteFile,n=Object(B.a)(),r=function(e){return"".concat(n,"/").concat(_()(e),".js")};return{getIncludeFileFor:function(e){return Object(N.a)()+r(e)},writeFunctionCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading function generated code to ".concat(o,"...")),Object(N.b)({Key:r(e),Body:n,ContentType:"text/javascript"})},writeBehaviorCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading behavior generated code to ".concat(o,"...")),Object(N.b)({Key:r(e),Body:n,ContentType:"text/javascript"})}}},J=n(1155),H=n(1142),V=n(1149),q=n(1971),K=n(9),Y=n(8),X=n(13),Z=n(14),Q=n(99),$=n(135),ee=n(492),te=n(61),ne=n(463),re=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._download=function(){var t="";try{t=JSON.stringify(Object(ee.b)(e.props.project))}catch(i){return void Object(te.a)({message:"Unable to save your project",rawError:i,errorId:"download-as-json-error"})}var n=encodeURI("data:application/json;charset=utf-8,"+t),r=document.createElement("a");r.href=n,r.download="game.json";var o=document.body;o&&(o.appendChild(r),r.click(),o.removeChild(r))},e}return Object(Y.a)(n,[{key:"render",value:function(){var e=this.props.onDone,t=[Object(C.jsx)($.a,{label:Object(C.jsx)(h.Trans,{id:"Download GDevelop desktop version"}),primary:!1,onClick:function(){return s.b.openExternalURL("http://gdevelop.io")}},"download"),Object(C.jsx)($.a,{label:Object(C.jsx)(h.Trans,{id:"Close"}),primary:!1,onClick:e},"close")];return Object(C.jsx)(Q.b,{actions:t,onRequestClose:e,open:!0,maxWidth:"sm",children:Object(C.jsxs)(m.a,{noMargin:!0,children:[Object(C.jsx)(m.c,{children:Object(C.jsx)(ne.a,{children:Object(C.jsx)(h.Trans,{id:"You can download the file of your game to continue working on it using the full GDevelop version:"})})}),Object(C.jsx)(m.c,{children:Object(C.jsx)(m.a,{expand:!0,children:Object(C.jsx)(O.a,{label:Object(C.jsx)(h.Trans,{id:"Download game file"}),fullWidth:!0,primary:!0,onClick:this._download})})})]})})}}]),n}(o.Component),oe=n(1973),ie=n.n(oe),ae={internalName:"DownloadFile",name:{id:"Download a copy"},renderIcon:function(){return Object(C.jsx)(ie.a,{})},hiddenInOpenDialog:!0,createOperations:function(e){var t=e.setDialog,n=e.closeDialog;return{onSaveProjectAs:function(e,r){return new Promise((function(o){t((function(){return Object(C.jsx)(re,{onDone:function(){n(),o({wasSaved:!1,fileMetadata:r})},project:e})}))}))}}}},se=n(893),ce=i.a.memo((function(e){return Object(C.jsx)(se.a,Object(r.a)(Object(r.a)({},e),{},{children:Object(C.jsx)("path",{d:"M12,14.56L16.35,18.16L18.2,16.95V18.3L12,22L5.82,18.3V16.95L7.68,18.16L12,14.56M7.68,2.5L12,6.09L16.32,2.5L22.5,6.5L18.23,9.94L22.5,13.36L16.32,17.39L12,13.78L7.68,17.39L1.5,13.36L5.77,9.94L1.5,6.5L7.68,2.5M12,13.68L18.13,9.94L12,6.19L5.87,9.94L12,13.68Z"})}))})),ue=!1,le=null,de=function(){return ue?Promise.resolve():le||(le=new Promise((function(e,t){t(new Error("Unimplemented"))})).then((function(){ue=!0,le=null})).catch((function(e){throw console.error("Error while loading Dropbox APIs:",e),le=null,e})))},pe={internalName:"Dropbox",name:{id:"Dropbox (coming soon)"},disabled:!0,renderIcon:function(){return Object(C.jsx)(ce,{})},createOperations:function(e){e.setDialog,e.closeDialog;return de().catch((function(){})),{doesInitialOpenRequireUserInteraction:!0,onOpen:function(e){return Promise.reject(new Error("Unimplemented"))},onOpenWithPicker:function(){return Promise.reject(new Error("Unimplemented"))},onSaveProject:function(e,t){return Promise.reject(new Error("Unimplemented"))},onSaveProjectAs:function(e,t){return Promise.reject(new Error("Unimplemented"))}}}},fe=i.a.memo((function(e){return Object(C.jsx)(se.a,Object(r.a)(Object(r.a)({},e),{},{children:Object(C.jsx)("path",{d:"M20.08,13.64C21.17,13.81 22,14.75 22,15.89C22,16.78 21.5,17.55 20.75,17.92L20.58,18H9.18L9.16,18V18C7.71,18 6.54,16.81 6.54,15.36C6.54,13.9 7.72,12.72 9.18,12.72L9.4,12.73L9.39,12.53A3.3,3.3 0 0,1 12.69,9.23C13.97,9.23 15.08,9.96 15.63,11C16.08,10.73 16.62,10.55 17.21,10.55A2.88,2.88 0 0,1 20.09,13.43L20.08,13.64M8.82,12.16C7.21,12.34 5.96,13.7 5.96,15.36C5.96,16.04 6.17,16.66 6.5,17.18H4.73A2.73,2.73 0 0,1 2,14.45C2,13 3.12,11.83 4.53,11.73L4.46,11.06C4.46,9.36 5.84,8 7.54,8C8.17,8 8.77,8.18 9.26,8.5C9.95,7.11 11.4,6.15 13.07,6.15C15.27,6.15 17.08,7.83 17.3,9.97H17.21C16.73,9.97 16.27,10.07 15.84,10.25C15.12,9.25 13.96,8.64 12.69,8.64C10.67,8.64 9,10.19 8.82,12.16Z"})}))})),be=!1,he=null,je=function(){return be?Promise.resolve():he||(he=new Promise((function(e,t){t(new Error("Unimplemented"))})).then((function(){be=!0,he=null})).catch((function(e){throw console.error("Error while loading OneDrive APIs:",e),he=null,e})))},ge={internalName:"OneDrive",name:{id:"OneDrive (coming soon)"},disabled:!0,renderIcon:function(){return Object(C.jsx)(fe,{})},createOperations:function(e){e.setDialog,e.closeDialog;return je().catch((function(){})),{doesInitialOpenRequireUserInteraction:!0,onOpen:function(e){return Promise.reject(new Error("Unimplemented"))},onOpenWithPicker:function(){return Promise.reject(new Error("Unimplemented"))},onSaveProject:function(e,t){return Promise.reject(new Error("Unimplemented"))},onSaveProjectAs:function(e,t){return Promise.reject(new Error("Unimplemented"))}}}},xe=n(1145),ve=n.n(xe),me=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().filter((function(e){var n,r=t.getResource(e);return!((n=r.getFile()).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")||n.startsWith("blob:")||n.startsWith("data:"))}))},we=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,o,i,a,s,c,u,l,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.resourceNames,o=t.onProgress,i=n.getResourcesManager(),a=[],s=[],c=n.getProjectFile(),u=c.substr(0,c.lastIndexOf("/")+1),(f=u).startsWith("http://")||f.startsWith("https://")||f.startsWith("ftp://")){e.next=8;break}return e.abrupt("return",{fetchedResources:[],erroredResources:[]});case 8:return l=0,p=me(n),e.next=12,ve.a.withConcurrency(20).for(r).process(function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.getResource(t),e.prev=1,r=new URL(n.getFile(),u).href,e.next=5,P.a.get(r,{timeout:3e3});case 5:n.setFile(r),s.push({resourceName:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a.push({resourceName:t,error:e.t0});case 12:o(l++,p.length);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());case 12:return e.abrupt("return",{fetchedResources:s,erroredResources:a});case 13:case"end":return e.stop()}var f}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe={getResourcesToFetch:me,fetchResources:we},Fe=n(1974),ye=function(e){s.b.setUpContextMenu();var t=s.b.getArguments();return Object(C.jsx)(J.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:G,eventsFunctionsExtensionWriter:null,eventsFunctionsExtensionOpener:null,resourceFetcher:Oe,children:function(e){var n=e.i18n;return Object(C.jsx)(H.a,{appArguments:t,storageProviders:[V.a,q.a,pe,ge,ae],defaultStorageProvider:V.a,children:function(e){var t=e.getStorageProviderOperations,o=e.storageProviders,i=e.initialFileMetadataToOpen,l=e.getStorageProvider;return Object(C.jsx)(a.a,{i18n:n,renderPreviewLauncher:function(e,t){return Object(C.jsx)(I.a,Object(r.a)(Object(r.a)({},e),{},{ref:t}))},renderExportDialog:function(e){return Object(C.jsx)(c.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:M.a,manualExporters:M.b,onlineWebExporter:M.c,allExportersRequireOnline:!0})},renderCreateDialog:function(e){return Object(C.jsx)(u.a,{open:e.open,onClose:e.onClose,onOpen:e.onOpen,initialTab:e.initialTab,onCreateBlank:Fe.a,onCreateFromExampleShortHeader:Fe.b})},storageProviders:o,onCreateFromExampleShortHeader:Fe.b,onCreateBlank:Fe.a,getStorageProviderOperations:t,getStorageProvider:l,resourceSources:R,resourceExternalEditors:L,extensionsLoader:Object(A.a)({objectsEditorService:U.a,objectsRenderingService:W.a,filterExamples:!s.b.isDev()}),initialFileMetadataToOpen:i})}})}})}},557:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(54),o={preview:["/Runtime/index.html"],web:["/Runtime/index.html"],"cocos2d-js":["/Runtime/Cocos2d/cocos2d-js-v3.10.js","/Runtime/Cocos2d/index.html","/Runtime/Cocos2d/main.js","/Runtime/Cocos2d/project.json"],"facebook-instant-games":["/Runtime/FacebookInstantGames/fbapp-config.json","/Runtime/FacebookInstantGames/index.html"],cordova:["/Runtime/Cordova/www/index.html","/Runtime/Cordova/config.xml","/Runtime/Cordova/package.json"],electron:["/Runtime/index.html","/Runtime/Electron/main.js","/Runtime/Electron/package.json"]},i=function(e){var t="https://resources.gdevelop-app.com/GDJS-".concat(Object(r.b)());return Promise.all(o[e].map((function(e){var n=t+e;return fetch(n).then((function(e){if(!e.ok)throw console.error('Error while downloading "'.concat(n,'"'),e),new Error('Error while downloading "'.concat(n,'" (status: ').concat(e.status,")"));return e.text().then((function(e){return{filePath:n,text:e}}))}))}))).then((function(e){return{gdjsRoot:t,filesContent:e}}))}},586:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(8),o=n(9),i=n(146),a=n.n(i),s=e.gd,c=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},u=a.a.posix||a.a,l=Object(r.a)((function e(t){var n=this,r=t.textFiles;Object(o.a)(this,e),this._textFiles={},this._filesToDownload={},this.getAllTextFilesIn=function(e){return Object.keys(n._textFiles).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,text:n._textFiles[e]}}))},this.getAllUrlFilesIn=function(e){return Object.keys(n._filesToDownload).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,url:n._filesToDownload[e]}}))},this.mkDir=function(e){return!0},this.dirExists=function(e){return!0},this.clearDir=function(e){return Object.keys(n._textFiles).forEach((function(t){0===t.indexOf(e)&&delete n._textFiles[t]})),!0},this.getTempDir=function(){return"/browser-file-system-tmp-dir"},this.fileNameFrom=function(e){return u.basename(e)},this.dirNameFrom=function(e){return u.dirname(e)},this.makeAbsolute=function(e,t){return c(e)?e:(n.isAbsolute(t)||(t=u.resolve(t)),u.resolve(t,u.normalize(e)))},this.makeRelative=function(e,t){return c(e)?0===e.indexOf(t)?e.substring(t.length):(console.warn("".concat(e," cannot be made relative to ").concat(t,", please double check this behavior is correct.")),e):u.relative(t,u.normalize(e))},this.isAbsolute=function(e){return!!c(e)||e.length>0&&"/"===e.charAt(0)},this.copyFile=function(e,t){return c(e)?c(t)?(console.error("Destination can't be a URL in copyFile (from ".concat(e," to ").concat(t,").")),!1):(n._filesToDownload[u.normalize(t)]=e,!0):n._textFiles[e]?(n._textFiles[u.normalize(t)]=n._textFiles[e],!0):(console.error("File not found in copyFile (from ".concat(e," to ").concat(t,").")),!1)},this.writeToFile=function(e,t){return n._textFiles[u.normalize(e)]=t,!0},this.readFile=function(e){return n._textFiles[e]?n._textFiles[e]:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new s.VectorString;return Object.keys(n._filesToDownload).forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){if(c(e))return!0;var t=u.normalize(e);return!!n._textFiles[t]||!!n._filesToDownload[t]},r.forEach((function(e){n._textFiles[e.filePath]=e.text}))}))}).call(this,n(27))},587:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n(3),o=n(0),i=n.n(o),a=n(1932),s=n(146),c=n.n(s),u=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n};function l(e,t,n){if(e.length){var r=0;!function o(){t(e[r],(function(){++r>=e.length?n():o()}))}()}else n()}var d=function(){var e=Object(r.a)(i.a.mark((function e(t){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,r=t.onProgress,o=0,e.abrupt("return",Promise.all(n.filter((function(e){return-1===e.url.indexOf(".h")})).map((function(e){var t=e.url,i=e.filePath,a=u(t,"gdUsage","export");return fetch(a).then((function(e){if(!e.ok)throw console.error('Error while downloading "'.concat(a,'"'),e),new Error('Error while downloading "'.concat(a,'" (status: ').concat(e.status,")"));return e.blob()}),(function(e){throw console.error('Error while downloading "'.concat(a,'"'),e),new Error('Error while downloading "'.concat(a,'" (network error)'))})).then((function(e){return o++,r(o,n.length),{filePath:i,blob:e}}))}))).then((function(e){return console.info("All downloads done"),e})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r.a)(i.a.mark((function e(t){var n,r,o,s,u,d,p,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.textFiles,r=t.blobFiles,o=t.basePath,s=t.onProgress,u=t.sizeLimit,e.next=3,Object(a.a)();case 3:return d=e.sent,p=0,f=r.length+n.length,e.abrupt("return",new Promise((function(e,t){d.createWriter(new d.BlobWriter("application/zip"),(function(i){l(r,(function(e,t){var n=e.filePath,r=e.blob,a=c.a.relative(o,n);i.add(a,new d.BlobReader(r),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){l(n,(function(e,t){var n=e.filePath,r=e.text,a=c.a.relative(o,n);i.add(a,new d.TextReader(r),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){i.close((function(n){var r=n.size;if(u&&r>u){var o=Math.round(r/1e6);t(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(u/1e6," MB.")))}e(n)}))}))}))}),(function(e){console.error("Error while making zip:",e),t(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},662:function(e,t,n){"use strict";n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return w}));var r=n(4),o=n(1931),i=n(1933),a=n(1934),s=n(1935),c=n(1936),u=n(1937),l=n(1938),d=n(734),p=n(744),f=n(743),b=n(737),h=n(738),j=n(739),g=n(735),x=Object(r.a)(Object(r.a)({},p.c),{},{exportPipeline:a.a}),v=[Object(r.a)(Object(r.a)({},f.c),{},{exportPipeline:s.a}),Object(r.a)(Object(r.a)({},h.b),{},{exportPipeline:o.a}),Object(r.a)(Object(r.a)({},j.b),{},{exportPipeline:i.a}),Object(r.a)(Object(r.a)({},b.c),{},{exportPipeline:l.a})],m=[Object(r.a)(Object(r.a)({},f.c),{},{exportPipeline:s.a}),Object(r.a)(Object(r.a)({},d.c),{},{exportPipeline:c.a}),Object(r.a)(Object(r.a)({},g.c),{},{exportPipeline:u.a})],w=function(e,t){var n=document.body;if(n){var r=document.createElement("a");n.appendChild(r),r.style.display="none",r.href=e,r.download=t,r.click(),n.removeChild(r)}}},742:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(28),o=n(1),i=function(e){var t=e.blob,n=e.children,i=o.useState(""),a=Object(r.a)(i,2),s=a[0],c=a[1];return o.useEffect((function(){return s&&URL.revokeObjectURL(s),c(t?URL.createObjectURL(t):""),function(){s&&URL.revokeObjectURL(s)}}),[t,s]),n(s)}},875:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(62),o=n.n(r),i=n(53),a=n(696),s=function(e){return Object(a.c)({uploadType:"preview",key:e.Key,contentType:e.ContentType}).then((function(t){var n=t.signedUrl;return o.a.put(n,e.Body,{headers:{"Content-Type":e.ContentType}})}))},c=function(){return i.f.baseUrl}},876:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(62),o=n.n(r),i=function(e,t,n){return o.a.put(t.signedUrl,e,{headers:{"Content-Type":t.contentType},maxContentLength:1/0,onUploadProgress:function(e){e&&e.total?n(e.loaded,e.total):n(0,0)}}).then((function(){}))}}}]);
//# sourceMappingURL=browser-app.c8afcff7.chunk.js.map